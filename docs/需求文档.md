# 个人博客系统 - 需求文档

## 1. 项目概述

### 1.1 项目背景
本项目旨在开发一个功能完善的个人博客系统，支持文章发布、AI智能对话等功能。由于阿里云服务器性能有限，系统采用反向代理架构，将大部分计算密集型功能部署在本地服务器，通过FRP内网穿透实现外网访问。

### 1.2 项目目标
- 搭建一个现代化的个人博客平台
- 集成本地大模型提供AI对话功能
- 通过FRP实现内网穿透，降低服务器成本
- 提供良好的用户体验和响应速度

### 1.3 目标用户
- 个人博主：发布技术文章、生活随笔
- 网站访客：阅读文章、与AI交互
- 开发学习者：参考项目架构和代码实现

## 2. 功能需求

### 2.1 用户管理模块

#### 2.1.1 用户注册
**需求描述**：用户可以通过填写基本信息创建账号

**功能要点**：
- 必填字段：用户名、邮箱、密码
- 用户名：3-20个字符，支持字母、数字、下划线
- 邮箱：符合邮箱格式规范
- 密码：6-20个字符，加密存储
- 验证用户名和邮箱唯一性
- 注册成功后跳转至登录页

**验收标准**：
- ✓ 输入验证正确
- ✓ 重复注册提示明确
- ✓ 密码加密存储
- ✓ 注册成功提示

#### 2.1.2 用户登录
**需求描述**：已注册用户可以通过用户名和密码登录系统

**功能要点**：
- 支持用户名登录
- 密码验证
- 生成JWT Token
- Token有效期24小时
- 登录状态持久化

**验收标准**：
- ✓ 登录验证正确
- ✓ Token正常生成
- ✓ 刷新页面保持登录状态
- ✓ 错误提示友好

#### 2.1.3 用户信息管理
**需求描述**：用户可以查看和编辑个人信息

**功能要点**：
- 查看个人资料
- 修改头像
- 修改基本信息
- 修改密码

**验收标准**：
- ✓ 信息显示完整
- ✓ 修改功能正常
- ✓ 安全性保障

### 2.2 文章管理模块

#### 2.2.1 文章列表
**需求描述**：展示所有已发布的文章列表

**功能要点**：
- 分页显示（每页10/20/50条）
- 搜索功能（标题、内容）
- 分类筛选
- 排序方式（时间、浏览量）
- 显示文章摘要、作者、发布时间、浏览量

**验收标准**：
- ✓ 列表加载正常
- ✓ 分页功能正常
- ✓ 搜索结果准确
- ✓ 响应速度快（< 1s）

#### 2.2.2 文章详情
**需求描述**：展示文章完整内容

**功能要点**：
- Markdown内容渲染
- 代码高亮显示
- 图片展示
- 文章元信息（标题、作者、时间、浏览量）
- 自动增加浏览量
- 分享功能
- 相关文章推荐

**验收标准**：
- ✓ 内容渲染正确
- ✓ 代码高亮美观
- ✓ 图片正常加载
- ✓ 浏览量准确统计

#### 2.2.3 文章创建
**需求描述**：登录用户可以创建新文章

**功能要点**：
- Markdown编辑器
- 实时预览
- 标题输入（必填）
- 摘要输入（选填）
- 分类选择
- 标签输入
- 草稿保存
- 发布文章

**验收标准**：
- ✓ 编辑器功能完善
- ✓ 预览效果准确
- ✓ 草稿功能正常
- ✓ 发布成功

#### 2.2.4 文章编辑
**需求描述**：文章作者可以编辑自己的文章

**功能要点**：
- 仅作者可编辑
- 修改所有字段
- 保存更新
- 权限验证

**验收标准**：
- ✓ 权限控制正确
- ✓ 编辑功能正常
- ✓ 更新成功

#### 2.2.5 文章删除
**需求描述**：文章作者可以删除自己的文章

**功能要点**：
- 仅作者可删除
- 二次确认
- 逻辑删除
- 权限验证

**验收标准**：
- ✓ 权限控制正确
- ✓ 删除确认提示
- ✓ 删除成功

### 2.3 AI对话模块

#### 2.3.1 AI聊天
**需求描述**：用户可以与本地大模型进行智能对话

**功能要点**：
- 实时对话
- 消息历史
- Markdown格式支持
- 代码高亮
- 清空对话
- 示例问题

**验收标准**：
- ✓ 对话流畅
- ✓ 响应及时（< 10s）
- ✓ 格式显示正确
- ✓ 历史记录保存

#### 2.3.2 AI服务状态
**需求描述**：显示AI服务的运行状态

**功能要点**：
- 服务状态检测
- 状态指示器
- 错误提示

**验收标准**：
- ✓ 状态显示准确
- ✓ 错误提示明确

### 2.4 系统管理模块

#### 2.4.1 内网穿透
**需求描述**：通过FRP实现内网服务外网访问

**功能要点**：
- FRP服务端部署在阿里云
- FRP客户端运行在本地
- 穿透后端服务（8080端口）
- 穿透前端服务（3000端口）
- 穿透AI服务（11434端口）
- 自动重连机制

**验收标准**：
- ✓ 穿透连接稳定
- ✓ 外网访问正常
- ✓ 断线自动重连

#### 2.4.2 反向代理
**需求描述**：Nginx反向代理到本地服务

**功能要点**：
- HTTP请求分发
- 路径路由
- 负载均衡
- 静态资源缓存

**验收标准**：
- ✓ 代理配置正确
- ✓ 路由分发准确
- ✓ 性能优化有效

## 3. 非功能需求

### 3.1 性能需求
- 页面加载时间 < 2s
- API响应时间 < 1s（AI接口除外）
- 支持并发用户数 >= 100
- 数据库查询优化

### 3.2 安全需求
- 密码加密存储（BCrypt）
- JWT Token认证
- SQL注入防护
- XSS攻击防护
- CSRF防护
- 接口权限验证

### 3.3 可用性需求
- 系统可用性 >= 99%
- 错误提示友好
- 操作反馈及时
- 界面美观易用

### 3.4 兼容性需求
- 支持主流浏览器（Chrome、Firefox、Safari、Edge）
- 响应式设计，支持移动端访问
- 屏幕分辨率适配

### 3.5 可维护性需求
- 代码结构清晰
- 注释完整
- 日志记录完善
- 易于扩展

### 3.6 可扩展性需求
- 支持插件机制
- 支持主题切换
- 支持多语言（预留）
- 支持评论功能（预留）

## 4. 约束条件

### 4.1 技术约束
- 后端：Spring Boot 2.7+
- 前端：Vue 3
- 数据库：MySQL 8.0
- AI服务：vLLM高性能推理框架
- 部署：Docker + FRP

### 4.2 环境约束
- 阿里云服务器：1核2G（低配）
- 本地服务器：Windows 10
- 网络：需要公网IP或内网穿透

### 4.3 时间约束
- 项目周期：根据实际情况调整
- 迭代周期：持续迭代

## 5. 验收标准

### 5.1 功能验收
- 所有核心功能正常运行
- 用户流程完整
- 异常处理完善

### 5.2 性能验收
- 响应时间符合要求
- 并发性能达标
- 资源占用合理

### 5.3 安全验收
- 通过安全测试
- 无明显安全漏洞
- 权限控制正确

### 5.4 用户体验验收
- 界面美观
- 操作流畅
- 提示友好

## 6. 风险评估

### 6.1 技术风险
- **风险**：FRP连接不稳定
- **应对**：增加重连机制，监控连接状态

### 6.2 性能风险
- **风险**：阿里云服务器性能不足
- **应对**：本地承担主要计算，服务器仅做转发

### 6.3 安全风险
- **风险**：数据泄露
- **应对**：加密传输，权限控制，安全审计

### 6.4 可用性风险
- **风险**：本地服务宕机
- **应对**：监控告警，快速恢复机制

## 7. 后续规划

### 7.1 功能扩展
- 评论系统
- 点赞收藏
- 用户关注
- 文章专栏
- 全文搜索
- RSS订阅

### 7.2 性能优化
- CDN加速
- 数据库优化
- 缓存策略
- 图片压缩

### 7.3 运营功能
- 数据统计
- SEO优化
- 访问分析
- 用户画像

## 附录

### A. 术语表
- **FRP**：Fast Reverse Proxy，内网穿透工具
- **JWT**：JSON Web Token，身份认证令牌
- **Markdown**：轻量级标记语言
- **vLLM**：高性能大语言模型推理框架

### B. 参考资料
- Spring Boot官方文档
- Vue.js官方文档
- FRP使用手册
- vLLM文档

