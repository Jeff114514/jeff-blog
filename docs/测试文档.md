# 个人博客系统 - 测试文档

## 1. 测试概述

### 1.1 测试目标
- 验证所有功能符合需求规格
- 确保系统稳定性和可靠性
- 验证系统性能指标
- 发现并修复潜在问题

### 1.2 测试范围
- 功能测试
- 接口测试
- 性能测试
- 安全测试
- 兼容性测试

### 1.3 测试环境

| 环境类型 | 配置说明 |
|---------|---------|
| 开发环境 | 本地开发机器 |
| 测试环境 | 独立测试服务器 |
| 生产环境 | 阿里云+本地服务器 |

## 2. 功能测试

### 2.1 用户模块测试

#### 2.1.1 用户注册测试

**测试用例1：正常注册**

| 项目 | 内容 |
|------|------|
| 用例ID | TC_USER_001 |
| 测试目的 | 验证用户可以成功注册 |
| 前置条件 | 用户未注册 |
| 测试步骤 | 1. 访问注册页面<br>2. 输入用户名：testuser<br>3. 输入邮箱：test@example.com<br>4. 输入密码：123456<br>5. 确认密码：123456<br>6. 点击注册按钮 |
| 预期结果 | 1. 注册成功提示<br>2. 跳转到登录页面 |
| 实际结果 | 待测试 |
| 测试状态 | ☐ 通过 ☐ 失败 |

**测试用例2：用户名重复**

| 项目 | 内容 |
|------|------|
| 用例ID | TC_USER_002 |
| 测试目的 | 验证用户名唯一性检查 |
| 前置条件 | 用户名已存在 |
| 测试步骤 | 1. 使用已存在的用户名注册 |
| 预期结果 | 提示"用户名已存在" |
| 实际结果 | 待测试 |
| 测试状态 | ☐ 通过 ☐ 失败 |

**测试用例3：邮箱格式验证**

| 项目 | 内容 |
|------|------|
| 用例ID | TC_USER_003 |
| 测试目的 | 验证邮箱格式校验 |
| 测试数据 | 1. test@example.com (有效)<br>2. test@example (无效)<br>3. test.example.com (无效) |
| 预期结果 | 有效邮箱通过，无效邮箱提示格式错误 |
| 实际结果 | 待测试 |
| 测试状态 | ☐ 通过 ☐ 失败 |

**测试用例4：密码强度验证**

| 项目 | 内容 |
|------|------|
| 用例ID | TC_USER_004 |
| 测试目的 | 验证密码长度限制 |
| 测试数据 | 1. "12345" (少于6位)<br>2. "123456" (6位，有效)<br>3. "12345678901234567890" (20位，有效)<br>4. "123456789012345678901" (超过20位) |
| 预期结果 | 6-20位密码通过，其他提示错误 |
| 实际结果 | 待测试 |
| 测试状态 | ☐ 通过 ☐ 失败 |

#### 2.1.2 用户登录测试

**测试用例5：正常登录**

| 项目 | 内容 |
|------|------|
| 用例ID | TC_USER_005 |
| 测试目的 | 验证用户可以成功登录 |
| 前置条件 | 用户已注册 |
| 测试步骤 | 1. 访问登录页面<br>2. 输入用户名<br>3. 输入密码<br>4. 点击登录 |
| 预期结果 | 1. 登录成功<br>2. 获得Token<br>3. 跳转到首页<br>4. 显示用户信息 |
| 实际结果 | 待测试 |
| 测试状态 | ☐ 通过 ☐ 失败 |

**测试用例6：错误密码登录**

| 项目 | 内容 |
|------|------|
| 用例ID | TC_USER_006 |
| 测试目的 | 验证密码错误处理 |
| 测试步骤 | 1. 输入正确用户名<br>2. 输入错误密码<br>3. 点击登录 |
| 预期结果 | 提示"密码错误" |
| 实际结果 | 待测试 |
| 测试状态 | ☐ 通过 ☐ 失败 |

**测试用例7：不存在的用户登录**

| 项目 | 内容 |
|------|------|
| 用例ID | TC_USER_007 |
| 测试目的 | 验证用户不存在处理 |
| 测试步骤 | 1. 输入不存在的用户名<br>2. 输入任意密码<br>3. 点击登录 |
| 预期结果 | 提示"用户不存在" |
| 实际结果 | 待测试 |
| 测试状态 | ☐ 通过 ☐ 失败 |

### 2.2 文章模块测试

#### 2.2.1 文章列表测试

**测试用例8：查看文章列表**

| 项目 | 内容 |
|------|------|
| 用例ID | TC_ARTICLE_001 |
| 测试目的 | 验证文章列表正常显示 |
| 测试步骤 | 1. 访问文章列表页 |
| 预期结果 | 1. 显示文章列表<br>2. 包含标题、摘要、作者、时间、浏览量<br>3. 分页功能正常 |
| 实际结果 | 待测试 |
| 测试状态 | ☐ 通过 ☐ 失败 |

**测试用例9：搜索文章**

| 项目 | 内容 |
|------|------|
| 用例ID | TC_ARTICLE_002 |
| 测试目的 | 验证文章搜索功能 |
| 测试步骤 | 1. 输入搜索关键词<br>2. 点击搜索或按Enter |
| 预期结果 | 显示包含关键词的文章 |
| 实际结果 | 待测试 |
| 测试状态 | ☐ 通过 ☐ 失败 |

**测试用例10：分类筛选**

| 项目 | 内容 |
|------|------|
| 用例ID | TC_ARTICLE_003 |
| 测试目的 | 验证分类筛选功能 |
| 测试步骤 | 1. 选择特定分类 |
| 预期结果 | 只显示该分类的文章 |
| 实际结果 | 待测试 |
| 测试状态 | ☐ 通过 ☐ 失败 |

#### 2.2.2 文章详情测试

**测试用例11：查看文章详情**

| 项目 | 内容 |
|------|------|
| 用例ID | TC_ARTICLE_004 |
| 测试目的 | 验证文章详情正常显示 |
| 测试步骤 | 1. 点击文章标题 |
| 预期结果 | 1. 显示完整文章内容<br>2. Markdown正确渲染<br>3. 代码高亮显示<br>4. 浏览量+1 |
| 实际结果 | 待测试 |
| 测试状态 | ☐ 通过 ☐ 失败 |

#### 2.2.3 文章创建测试

**测试用例12：创建文章**

| 项目 | 内容 |
|------|------|
| 用例ID | TC_ARTICLE_005 |
| 测试目的 | 验证文章创建功能 |
| 前置条件 | 用户已登录 |
| 测试步骤 | 1. 点击"写文章"<br>2. 输入标题<br>3. 输入内容<br>4. 选择分类<br>5. 输入标签<br>6. 点击"发布文章" |
| 预期结果 | 1. 文章创建成功<br>2. 跳转到文章详情 |
| 实际结果 | 待测试 |
| 测试状态 | ☐ 通过 ☐ 失败 |

**测试用例13：保存草稿**

| 项目 | 内容 |
|------|------|
| 用例ID | TC_ARTICLE_006 |
| 测试目的 | 验证草稿保存功能 |
| 前置条件 | 用户已登录 |
| 测试步骤 | 1. 输入文章信息<br>2. 点击"保存草稿" |
| 预期结果 | 1. 草稿保存成功<br>2. 状态为草稿 |
| 实际结果 | 待测试 |
| 测试状态 | ☐ 通过 ☐ 失败 |

**测试用例14：预览文章**

| 项目 | 内容 |
|------|------|
| 用例ID | TC_ARTICLE_007 |
| 测试目的 | 验证文章预览功能 |
| 测试步骤 | 1. 输入文章内容<br>2. 点击"预览" |
| 预期结果 | 1. 打开预览弹窗<br>2. Markdown正确渲染 |
| 实际结果 | 待测试 |
| 测试状态 | ☐ 通过 ☐ 失败 |

#### 2.2.4 权限测试

**测试用例15：未登录创建文章**

| 项目 | 内容 |
|------|------|
| 用例ID | TC_ARTICLE_008 |
| 测试目的 | 验证创建文章权限 |
| 前置条件 | 用户未登录 |
| 测试步骤 | 1. 访问创建文章页 |
| 预期结果 | 跳转到登录页 |
| 实际结果 | 待测试 |
| 测试状态 | ☐ 通过 ☐ 失败 |

**测试用例16：编辑他人文章**

| 项目 | 内容 |
|------|------|
| 用例ID | TC_ARTICLE_009 |
| 测试目的 | 验证编辑权限控制 |
| 前置条件 | 用户已登录，访问他人文章 |
| 测试步骤 | 1. 尝试编辑他人文章 |
| 预期结果 | 无编辑按钮或提示无权限 |
| 实际结果 | 待测试 |
| 测试状态 | ☐ 通过 ☐ 失败 |

### 2.3 AI对话模块测试

**测试用例17：AI对话**

| 项目 | 内容 |
|------|------|
| 用例ID | TC_AI_001 |
| 测试目的 | 验证AI对话功能 |
| 测试步骤 | 1. 访问AI对话页<br>2. 输入问题<br>3. 点击发送 |
| 预期结果 | 1. 显示用户消息<br>2. 显示加载状态<br>3. 显示AI回复<br>4. 回复格式正确 |
| 实际结果 | 待测试 |
| 测试状态 | ☐ 通过 ☐ 失败 |

**测试用例18：AI服务异常处理**

| 项目 | 内容 |
|------|------|
| 用例ID | TC_AI_002 |
| 测试目的 | 验证AI服务异常处理 |
| 前置条件 | AI服务未启动 |
| 测试步骤 | 1. 发送消息 |
| 预期结果 | 提示"AI服务暂时不可用" |
| 实际结果 | 待测试 |
| 测试状态 | ☐ 通过 ☐ 失败 |

**测试用例19：清空对话**

| 项目 | 内容 |
|------|------|
| 用例ID | TC_AI_003 |
| 测试目的 | 验证清空对话功能 |
| 前置条件 | 已有对话记录 |
| 测试步骤 | 1. 点击"清空对话" |
| 预期结果 | 对话记录被清空 |
| 实际结果 | 待测试 |
| 测试状态 | ☐ 通过 ☐ 失败 |

## 3. 接口测试

### 3.1 认证接口测试

#### 测试用例20：注册接口

```bash
curl -X POST http://localhost:8080/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "email": "test@example.com",
    "password": "123456"
  }'
```

**预期响应**：
```json
{
  "code": 200,
  "message": "注册成功"
}
```

#### 测试用例21：登录接口

```bash
curl -X POST http://localhost:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "password": "123456"
  }'
```

**预期响应**：
```json
{
  "code": 200,
  "message": "登录成功",
  "data": {
    "token": "jwt_token_string",
    "userId": 1,
    "username": "testuser",
    "email": "test@example.com"
  }
}
```

### 3.2 文章接口测试

#### 测试用例22：获取文章列表

```bash
curl -X GET http://localhost:8080/api/articles?page=1&size=10
```

#### 测试用例23：获取文章详情

```bash
curl -X GET http://localhost:8080/api/articles/1
```

#### 测试用例24：创建文章

```bash
curl -X POST http://localhost:8080/api/articles?userId=1 \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -d '{
    "title": "测试文章",
    "content": "文章内容",
    "summary": "文章摘要",
    "category": "技术",
    "tags": "Java,Spring",
    "status": 1
  }'
```

### 3.3 AI接口测试

#### 测试用例25：AI对话接口

```bash
curl -X POST http://localhost:8080/api/ai/chat \
  -H "Content-Type: application/json" \
  -d '{
    "message": "你好"
  }'
```

## 4. 性能测试

### 4.1 响应时间测试

**测试目标**：
- 页面加载时间 < 2s
- API响应时间 < 1s
- AI响应时间 < 10s

**测试工具**：
- Chrome DevTools
- Apache Bench (ab)
- wrk

#### 测试用例26：首页加载性能

```bash
# 使用ab测试
ab -n 1000 -c 10 http://localhost:3000/
```

**性能指标**：
- 平均响应时间：< 100ms
- 95%响应时间：< 200ms
- 吞吐量：> 100 req/s

#### 测试用例27：文章列表API性能

```bash
ab -n 1000 -c 50 http://localhost:8080/api/articles/list
```

**性能指标**：
- 平均响应时间：< 50ms
- 95%响应时间：< 100ms
- 吞吐量：> 200 req/s

### 4.2 并发测试

**测试目标**：支持100并发用户

#### 测试用例28：高并发访问

```bash
# 使用wrk测试
wrk -t12 -c100 -d30s http://localhost:3000/
```

**监控指标**：
- CPU使用率 < 80%
- 内存使用率 < 80%
- 错误率 < 1%

### 4.3 压力测试

**测试目标**：找出系统最大承载能力

```bash
# 逐步增加并发
wrk -t12 -c100 -d60s http://localhost:8080/api/articles/list
wrk -t12 -c200 -d60s http://localhost:8080/api/articles/list
wrk -t12 -c400 -d60s http://localhost:8080/api/articles/list
```

**记录**：
- 最大并发数
- 临界点性能指标
- 失败开始的并发数

## 5. 安全测试

### 5.1 SQL注入测试

**测试用例29：登录SQL注入**

```bash
# 尝试SQL注入
curl -X POST http://localhost:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin' OR '1'='1",
    "password": "anything"
  }'
```

**预期结果**：登录失败，无法绕过验证

### 5.2 XSS测试

**测试用例30：文章标题XSS**

```bash
# 尝试XSS攻击
curl -X POST http://localhost:8080/api/articles?userId=1 \
  -H "Content-Type: application/json" \
  -d '{
    "title": "<script>alert('XSS')</script>",
    "content": "测试内容"
  }'
```

**预期结果**：脚本被转义，不执行

### 5.3 权限测试

**测试用例31：未授权访问**

```bash
# 不带Token访问
curl -X POST http://localhost:8080/api/articles?userId=1 \
  -H "Content-Type: application/json" \
  -d '{"title": "test"}'
```

**预期结果**：返回401未授权

## 6. 兼容性测试

### 6.1 浏览器兼容性

| 浏览器 | 版本 | 测试结果 | 备注 |
|--------|------|---------|------|
| Chrome | 最新版 | ☐ 通过 | |
| Firefox | 最新版 | ☐ 通过 | |
| Safari | 最新版 | ☐ 通过 | |
| Edge | 最新版 | ☐ 通过 | |

### 6.2 响应式测试

| 设备类型 | 分辨率 | 测试结果 | 备注 |
|---------|--------|---------|------|
| 桌面 | 1920x1080 | ☐ 通过 | |
| 笔记本 | 1366x768 | ☐ 通过 | |
| 平板 | 768x1024 | ☐ 通过 | |
| 手机 | 375x667 | ☐ 通过 | |

## 7. 测试报告模板

### 7.1 测试摘要

| 项目 | 内容 |
|------|------|
| 测试时间 | YYYY-MM-DD |
| 测试人员 | XXX |
| 测试环境 | 开发/测试/生产 |
| 测试版本 | v1.0.0 |

### 7.2 测试结果统计

| 测试类型 | 用例总数 | 通过 | 失败 | 通过率 |
|---------|---------|------|------|--------|
| 功能测试 | 31 | - | - | -% |
| 接口测试 | 6 | - | - | -% |
| 性能测试 | 3 | - | - | -% |
| 安全测试 | 3 | - | - | -% |
| 兼容性测试 | 8 | - | - | -% |
| **总计** | **51** | **-** | **-** | **-%** |

### 7.3 缺陷统计

| 缺陷等级 | 数量 | 已修复 | 未修复 |
|---------|------|--------|--------|
| 严重 | - | - | - |
| 重要 | - | - | - |
| 一般 | - | - | - |
| 轻微 | - | - | - |
| **总计** | **-** | **-** | **-** |

### 7.4 测试结论

- 功能完整性：☐ 完整 ☐ 基本完整 ☐ 不完整
- 性能表现：☐ 优秀 ☐ 良好 ☐ 一般 ☐ 较差
- 安全性：☐ 安全 ☐ 基本安全 ☐ 存在风险
- 稳定性：☐ 稳定 ☐ 基本稳定 ☐ 不稳定

**测试建议**：
1. 建议列表...

**发布建议**：
- ☐ 可以发布
- ☐ 修复重要问题后发布
- ☐ 不建议发布

## 8. 自动化测试

### 8.1 单元测试

**后端单元测试示例**：

```java
@SpringBootTest
public class UserServiceTest {
    
    @Autowired
    private UserService userService;
    
    @Test
    public void testRegister() {
        RegisterRequest request = new RegisterRequest();
        request.setUsername("testuser");
        request.setEmail("test@example.com");
        request.setPassword("123456");
        
        Result<?> result = userService.register(request);
        assertEquals(200, result.getCode());
    }
}
```

### 8.2 集成测试

**API集成测试示例**：

```bash
# 创建测试脚本
vim test_api.sh

#!/bin/bash
# 测试注册
REGISTER=$(curl -s -X POST http://localhost:8080/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"username":"test","email":"test@test.com","password":"123456"}')

echo "Register: $REGISTER"

# 测试登录
LOGIN=$(curl -s -X POST http://localhost:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"test","password":"123456"}')

echo "Login: $LOGIN"
```

### 8.3 E2E测试

**前端E2E测试（使用Cypress）**：

```javascript
describe('博客系统E2E测试', () => {
  it('用户注册登录流程', () => {
    // 访问首页
    cy.visit('http://localhost:3000')
    
    // 点击注册
    cy.contains('注册').click()
    
    // 填写注册信息
    cy.get('input[placeholder="请输入用户名"]').type('testuser')
    cy.get('input[placeholder="请输入邮箱"]').type('test@example.com')
    cy.get('input[placeholder="请输入密码"]').type('123456')
    cy.get('input[placeholder="请再次输入密码"]').type('123456')
    
    // 提交注册
    cy.contains('注册').click()
    
    // 验证跳转到登录页
    cy.url().should('include', '/login')
  })
})
```

## 9. 测试数据

### 9.1 测试账号

| 用户名 | 密码 | 角色 | 用途 |
|--------|------|------|------|
| jeff | Jeff@2024!Labyrinth | 管理员 | 管理功能测试 |
| testuser1 | test123 | 普通用户 | 基本功能测试 |
| testuser2 | test123 | 普通用户 | 权限测试 |

### 9.2 测试文章

准备不同类型的测试文章：
- 长文章（10000字+）
- 短文章（100字）
- 包含代码的文章
- 包含图片的文章
- Markdown格式测试文章

## 10. 测试工具

### 10.1 推荐工具

- **接口测试**：Postman, curl, Thunder Client
- **性能测试**：Apache Bench, wrk, JMeter
- **安全测试**：OWASP ZAP, Burp Suite
- **自动化测试**：JUnit, Cypress, Selenium
- **监控工具**：Chrome DevTools, Lighthouse

### 10.2 测试环境搭建

```bash
# 安装测试工具
# Apache Bench
sudo apt install apache2-utils

# wrk
git clone https://github.com/wg/wrk.git
cd wrk
make
sudo cp wrk /usr/local/bin/

# Postman
# 下载并安装：https://www.postman.com/downloads/
```

## 附录

### A. 测试检查清单

**上线前检查**：
- [ ] 所有功能测试通过
- [ ] 性能指标达标
- [ ] 安全测试通过
- [ ] 兼容性测试通过
- [ ] 文档完整
- [ ] 备份机制验证
- [ ] 监控告警配置
- [ ] 回滚方案准备

### B. 常见问题FAQ

Q: 测试环境如何搭建？
A: 参考部署文档，使用Docker快速搭建测试环境。

Q: 如何模拟高并发？
A: 使用wrk或JMeter等工具进行压力测试。

Q: 如何进行安全测试？
A: 使用OWASP ZAP等专业工具，测试常见漏洞。

